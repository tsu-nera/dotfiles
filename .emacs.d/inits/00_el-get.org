* El-get
Emacs用パッケージマネージャー

** 環境による場合分け
el-get実行前に、環境による場合分けのマクロを定義。

#+begin_src emacs-lisp :tangle yes
;; -----------------------------------------------------------------------
;; Function : 環境による場合分けの方法
;;   http://d.hatena.ne.jp/tomoya/20090811/1250006208
;; ------------------------------------------------------------------------
(defun x->bool (elt) (not (not elt)))

;; emacs-version predicates
(setq emacs22-p (string-match "^22" emacs-version)
      emacs23-p (string-match "^23" emacs-version)
      emacs23.0-p (string-match "^23\.0" emacs-version)
      emacs23.1-p (string-match "^23\.1" emacs-version)
      emacs23.2-p (string-match "^23\.2" emacs-version))

;; system-type predicates
(setq darwin-p  (eq system-type 'darwin)
      ns-p      (eq window-system 'ns)
      carbon-p  (eq window-system 'mac)
      linux-p   (eq system-type 'gnu/linux)
      colinux-p (when linux-p
		  (let ((file "/proc/modules"))
		    (and
		     (file-readable-p file)
		     (x->bool
		      (with-temp-buffer
			(insert-file-contents file)
			(goto-char (point-min))
			(re-search-forward "^cofuse\.+" nil t))))))
      cygwin-p  (eq system-type 'cygwin)
      nt-p      (eq system-type 'windows-nt)
      meadow-p  (featurep 'meadow)
      windows-p (or cygwin-p nt-p meadow-p))
#+end_src

* el-get.el
インストール自体は init.elで。

** 共通パッケージ

#+begin_src emacs-lisp :tangle yes
(defvar my/el-get-packages-common
  '(
    ;; window
    popwin
    switch-window
    ace-jump-mode
    ;; text
    yasnippet
    auto-complete
    anzu
    auto-highlight-symbol
    highlight-symbol
    multiple-cursors
    ;; smart-compile 独自改造したものをelispにおいた
    expand-region
    ;; utility
    howm
    direx
    stripe-buffer
    tempbuf
    exec-path-from-shell
    ;; helm
    helm
    helm-c-yasnippet
    helm-descbinds
    helm-orgcard
    anything
    ;; helm-shell-history
    ;; org-mode
    org-mode
    org-pomodoro
    org-pandoc
    deferred
    ;; color
    color-theme
    molokai-theme
    ;; programming
    flymake
    flycheck
    flycheck-color-mode-line
    ;; ruby
    ruby-block
    robe-mode
    ruby-electric
    rspec-mode
    ruby-refactor
    rcodetools
    inf-ruby
    auto-complete-ruby
    anything-rdefs
    ;; visual-basic
    vbasense
    visual-basic-mode
    ;; minor-mode
    rainbow-mode
    yaml-mode
    markdown-mode
    plantuml-mode
    elscreen
    tomatinho
    )
  "A list of packages to install from el-get at launch")
#+end_src

** Linux 特有のパッケージ
el-getの延長でbuildとか動くとcygwinでこけたりする。

#+begin_src emacs-lisp :tangle yes
(defvar my/el-get-packages-for-linux
  '(
    migemo
    pdf-tools
    magit
    wanderlust
    emacs-w3m  ;; cvs command not found
    )
  "A list of packages that can build only linux, fail for windows")
#+end_src

** Private パッケージ
会社でつかわないパッケージ

#+begin_src emacs-lisp :tangle yes
(defvar my/el-get-packages-private
  '(
    calfw
    helm-gist
    helm-github-issues
    helm-open-github
    org2blog
    org-gcal
    ox-rst
    ox-wk
    gist
    cool-mode
    esup
    scala-mode2
    ;; ensime
    )
  "A list of packages that is not necessory for my work.")
#+end_src

* el-get-elpa
MELPAとの連携。M-x el-get-elpa-build-local-recipesする。

http://stackoverflow.com/questions/23165158/how-do-i-install-melpa-packages-via-el-get

#+begin_src emacs-lisp :tangle yes
(require 'el-get-elpa)
(unless (file-directory-p el-get-recipe-path-elpa)
  (el-get-elpa-build-local-recipes))
#+end_src

* el-get 同期
#+begin_src emacs-lisp :tangle yes
;; auto install el-get.el
(defvar my/el-get-packages-all
  (append 
  my/el-get-packages-common
  my/el-get-packages-private
  (when linux-p my/el-get-packages-for-linux)
  )
  "A list of packages to install from el-get at launch.")

;; 同期する
;; (el-get 'sync my/el-get-packages-all)
;; (el-get 'sync my/el-get-packages-work)
;; (el-get 'sync my/el-get-packages-private)
#+end_src

* package.el

#+begin_src emacs-lisp :tangle yes
(require 'package)
(package-initialize)
(add-to-list 'package-archives '("melpa" . "http://melpa.milkbox.net/packages/") t)
#+end_src
